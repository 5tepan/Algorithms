{
1. 13.3. ???????? ?????? – ???? (6)
????????? ????? ??? ????????? ??????? ? ????????? ????? ??????? ?????? – ????. ? ????? ??? ???????? ????. ??????? ????? ???????? ??????? ? ?????????? ? ????? ?????? ????? ?? ??????. ????? ?????? ????? ????? ?????????????????? ??? ??????. ?????????? ?????? ?? ?????? ???????? ?? ???????? ????, ?? ???? ?????? ????? ? ??????? ? ????? ????? ???? ??? ????????, ??? ? ?????????.
???? ?? ????? INPUT.TXT. ?????? ?????? ????? ???????? ???????? ? ????? ????? ?? 1 ?? 255. ?????? ?????? ?????? ??? ?????????? ?????.
????? ? ???? OUTPUT.TXT. ??????? ? ?????? ?????? ????? ?????? ?????????????????? ??????? ????? ? ??????? ? ??????, ??????? ? ??????? ??????? ?????? ? ?????. ????????? ????? ? ??????? ? ?????? ?????????? ? 1. ???? ????????? ???, ??????? No.
2.Фомин Степан ПС-21
3. Dev+GNU Pascal 1.9.4.13
   Кодировка - 1251
4.INPUT - input.txt
  OUTPUT - output.txt
5.INPUT - ???? ?? ????? INPUT.TXT. ?????? ?????? ????? ???????? ???????? ? ????? ????? ?? 1 ?? 255. ?????? ?????? ?????? ??? ?????????? ?????.
  OUTPUT - ????? ? ???? OUTPUT.TXT. ??????? ? ?????? ?????? ????? ?????? ?????????????????? ??????? ????? ? ??????? ? ??????, ??????? ? ??????? ??????? ?????? ? ?????. ????????? ????? ? ??????? ? ?????? ?????????? ? 1. ???? ????????? ???, ??????? No.
}


PROGRAM BoyerMur;
CONST 
  MaxKol=1000;
Type
  BTMTable = array[0..255] OF INTEGER;
  Table = array[0..255,1..2] OF INTEGER;// номер строки, номер позиции
Var
  Fin,Fout: Text;
  NameFile,FindSTR,TetxSTR: STRING;
  Ch: CHAR;
  BTM: BTMTable;
  Pos, UdPos, Kol, i, NomStr, NomPoz: INTEGER;
  PosInFile: Table;
  
PROCEDURE MakeTable(VAR BTM :BTMTable; FindSTR: STRING);
Var
  i: INTEGER;
BEGIN
   FOR i:=0 TO 255
   DO
     BTM[i]:=LENGTH(FindSTR);
     
   FOR i:=LENGTH(FindSTR)-1 DOWNTO 1     
   DO   
     IF BTM[BYTE(UpCase(FindSTR[i]))]=LENGTH(FindSTR)
     THEN
       BTM[BYTE(UpCase(FindSTR[i]))]:=LENGTH(FindSTR)-i;     

END; 

FUNCTION BTMSearch(StartPos: INTEGER; S, P: STRING; BTM :BTMTable): INTEGER;
Var
  Pos, lp, i: INTEGER;
BEGIN
   lp:=LENGTH(P);
   Pos:=StartPos+ lp-1;
   WHILE Pos<= LENGTH(S)
   DO
     IF P[lp]<>S[Pos]
     THEN
       Pos:=Pos+BTM[BYTE(S[Pos])]
     ELSE
       BEGIN 
         IF lp=1  //поиск одной буквы
         THEN
           BEGIN
             BTMSearch := Pos-lp+1;
             EXIT;
           END;
         FOR i:=lp-1 DOWNTO 1
         DO
           IF P[i]<>S[Pos-lp+i]                                                   
           THEN
             BEGIN
               INC(Pos);
               BREAK;
             END
           ELSE
             IF i=1
             THEN
               BEGIN
                 BTMSearch := Pos-lp+1;
                 EXIT;
               END;
       END;             
   BTMSearch:=0;            
END;

PROCEDURE SavePosition(FlagOne: BOOLEAN);
BEGIN
  IF FlagOne
  THEN
    BEGIN
      TetxSTR:=TetxSTR+UpCase(CH);         
      INC(NomPoz);
      PosInFile[LENGTH(TetxSTR),1]:=NomStr;
      PosInFile[LENGTH(TetxSTR),2]:=NomPoz;
    END
  ELSE
    FOR i:=1 TO 255
    DO
      IF i+UdPos<=255
      THEN
        BEGIN
          PosInFile[i,1]:=PosInFile[i+UdPos,1];
          PosInFile[i,2]:=PosInFile[i+UdPos,2];              
        END  
      ELSE  
        BEGIN          
          PosInFile[i,1]:=0;
          PosInFile[i,2]:=0;              
        END;  
END;

BEGIN
  ASSIGN(Fin, 'Input.txt');
  RESET(Fin);
  ASSIGN(FOut, 'Output.txt');
  REWRITE(FOut);
  FindSTR:="";
  WHILE NOT EOLN(Fin)
  DO 
    BEGIN
      READ(Fin,CH);  
      FindSTR:=FindSTR+UpCase(CH);
    END;  
  MakeTable(BTM,FindSTR);
  READLN(Fin);  

  READLN(Fin,NameFile);  
  CLOSE(Fin);
  ASSIGN(Fin, NameFile);
  RESET(Fin);
  Kol:=0;
  TetxSTR:="";
  Pos:=1;
  NomStr:=1;
  NomPoz:=0;
  WHILE NOT ((Pos=0) AND (EOF(Fin))) 
    DO
      BEGIN    
        Pos := BTMSearch(1,TetxSTR,FindSTR,BTM);
        UdPos:= Pos;
        IF Pos<>0
        THEN
          BEGIN
            WRITELN(FOut,PosInFile[Pos,1]," ",PosInFile[Pos,2]);                            
            INC(Kol);
          END  
        ELSE
          UdPos:=LENGTH(FindSTR)-1;
        DELETE(TetxSTR,1,UdPos);          
        SavePosition(FALSE);
        
        // Подкачиваем
        WHILE (NOT EOF(Fin)) AND (LENGTH(TetxSTR)<255)
        DO
          BEGIN
            IF EOLN(Fin)
            THEN
              BEGIN
                READLN(Fin,Ch);   
                SavePosition(TRUE);           
                INC(NomStr);    
                NomPoz:=0;                    
              END
            ELSE  
              BEGIN 
                READ(Fin,Ch);
                SavePosition(TRUE); 
              END;  
            Pos:=1;    
          END;    
      END;  
  IF Kol=0
  THEN
    WRITELN(FOut,"No");
END.  
